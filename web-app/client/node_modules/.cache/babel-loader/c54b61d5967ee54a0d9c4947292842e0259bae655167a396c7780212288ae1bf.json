{"ast":null,"code":"var _jsxFileName = \"/Users/jasonglaspey/Coding/Lost Valley - Image Management/web-app/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from '@tanstack/react-query';\nimport { Toaster } from 'sonner';\nimport { SearchHeader } from './components/SearchHeader';\nimport { FilterPanel } from './components/FilterPanel';\nimport { MasonryGallery } from './components/MasonryGallery';\nimport { ImageDetailModal } from './components/ImageDetailModal';\nimport { imageApi } from './api/client';\nimport { Button } from './components/ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000,\n      // 5 minutes\n      gcTime: 10 * 60 * 1000,\n      // 10 minutes\n      retry: 1,\n      refetchOnWindowFocus: false\n    }\n  }\n});\nconst initialFilters = {\n  query: '',\n  visualQuality: [1, 5],\n  hasPeople: undefined,\n  peopleCount: [],\n  isIndoor: undefined,\n  activityTags: [],\n  season: [],\n  timeOfDay: [],\n  socialMediaScore: [1, 5],\n  marketingScore: [1, 5],\n  minWidth: undefined,\n  maxWidth: undefined,\n  minHeight: undefined,\n  maxHeight: undefined,\n  aspectRatio: 'any'\n};\nfunction ImageApp() {\n  _s();\n  var _data$pagination;\n  const [filters, setFilters] = useState(initialFilters);\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [viewMode, setViewMode] = useState('grid');\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [page, setPage] = useState(1);\n\n  // Check if we're using search or just listing\n  const hasActiveFilters = useMemo(() => {\n    return filters.query !== '' || filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5 || filters.hasPeople !== undefined || filters.peopleCount.length > 0 || filters.isIndoor !== undefined || filters.activityTags.length > 0 || filters.season.length > 0 || filters.timeOfDay.length > 0 || filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5 || filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5 || filters.minWidth !== undefined || filters.maxWidth !== undefined || filters.minHeight !== undefined || filters.maxHeight !== undefined || filters.aspectRatio !== 'any';\n  }, [filters]);\n\n  // Query for images\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery({\n    queryKey: ['images', filters, page, hasActiveFilters],\n    queryFn: async () => {\n      if (hasActiveFilters) {\n        return await imageApi.searchImages({\n          ...filters,\n          page,\n          limit: 50,\n          sort: 'created_date',\n          order: 'DESC'\n        });\n      } else {\n        return await imageApi.getImages({\n          page,\n          limit: 50,\n          sort: 'created_date',\n          order: 'DESC',\n          status: 'completed'\n        });\n      }\n    }\n  });\n  const images = (data === null || data === void 0 ? void 0 : data.images) || [];\n  const totalCount = (data === null || data === void 0 ? void 0 : (_data$pagination = data.pagination) === null || _data$pagination === void 0 ? void 0 : _data$pagination.total) || 0;\n  const totalPages = Math.ceil(totalCount / 50);\n\n  // Filter images client-side for better performance\n  const filteredImages = useMemo(() => {\n    if (isLoading) {\n      return [];\n    }\n    return images.filter(image => {\n      // Skip filtering if no filters active - show all images\n      if (!hasActiveFilters) {\n        return true;\n      }\n      // Text search\n      if (filters.query) {\n        const query = filters.query.toLowerCase();\n        const searchText = `${image.primary_subject} ${image.filename} ${image.notes} ${image.activity_tags.join(' ')}`.toLowerCase();\n        if (!searchText.includes(query)) return false;\n      }\n\n      // Visual quality filter\n      if (image.visual_quality < filters.visualQuality[0] || image.visual_quality > filters.visualQuality[1]) {\n        return false;\n      }\n\n      // People filters\n      if (filters.hasPeople !== undefined && image.has_people !== filters.hasPeople) {\n        return false;\n      }\n      if (filters.peopleCount.length > 0 && !filters.peopleCount.includes(image.people_count)) {\n        return false;\n      }\n\n      // Indoor/outdoor filter\n      if (filters.isIndoor !== undefined && image.is_indoor !== filters.isIndoor) {\n        return false;\n      }\n\n      // Activity tags filter\n      if (filters.activityTags.length > 0) {\n        const hasMatchingTag = filters.activityTags.some(tag => image.activity_tags.includes(tag));\n        if (!hasMatchingTag) return false;\n      }\n\n      // Season filter\n      if (filters.season.length > 0 && !filters.season.includes(image.season)) {\n        return false;\n      }\n\n      // Time of day filter\n      if (filters.timeOfDay.length > 0 && !filters.timeOfDay.includes(image.time_of_day)) {\n        return false;\n      }\n\n      // Social media score filter\n      if (image.social_media_score < filters.socialMediaScore[0] || image.social_media_score > filters.socialMediaScore[1]) {\n        return false;\n      }\n\n      // Marketing score filter\n      if (image.marketing_score < filters.marketingScore[0] || image.marketing_score > filters.marketingScore[1]) {\n        return false;\n      }\n      return true;\n    });\n  }, [images, filters, hasActiveFilters, isLoading]);\n\n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filters.query) count++;\n    if (filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5) count++;\n    if (filters.hasPeople !== undefined) count++;\n    if (filters.peopleCount.length > 0) count++;\n    if (filters.isIndoor !== undefined) count++;\n    if (filters.activityTags.length > 0) count++;\n    if (filters.season.length > 0) count++;\n    if (filters.timeOfDay.length > 0) count++;\n    if (filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5) count++;\n    if (filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5) count++;\n    return count;\n  }, [filters]);\n  const handleFiltersChange = newFilters => {\n    setFilters(newFilters);\n    setPage(1); // Reset to first page when filters change\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-background flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl mb-2\",\n          children: \"Failed to load images\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground\",\n          children: \"Please check your connection and try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-background flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-primary text-primary-foreground p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-medium\",\n          children: \"Lost Valley Image Manager\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-primary-foreground/80 mt-1\",\n          children: \"Search and manage your processed permaculture image library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchHeader, {\n      filters: filters,\n      onFiltersChange: handleFiltersChange,\n      onToggleFilters: () => setIsFiltersOpen(!isFiltersOpen),\n      isFiltersOpen: isFiltersOpen,\n      activeFilterCount: activeFilterCount,\n      viewMode: viewMode,\n      onViewModeChange: setViewMode,\n      resultCount: filteredImages.length\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex\",\n      children: [/*#__PURE__*/_jsxDEV(FilterPanel, {\n        filters: filters,\n        onFiltersChange: handleFiltersChange,\n        isOpen: isFiltersOpen,\n        onToggle: () => setIsFiltersOpen(!isFiltersOpen),\n        activeFilterCount: activeFilterCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6\",\n        children: [isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center py-16\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted-foreground\",\n              children: \"Loading images...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this) : filteredImages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center py-16 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-6xl mb-4\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg mb-2\",\n            children: \"No images found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted-foreground max-w-md\",\n            children: \"Try adjusting your search query or filters to find more images in your collection.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this) : viewMode === 'grid' ? /*#__PURE__*/_jsxDEV(MasonryGallery, {\n          images: filteredImages,\n          onImageClick: setSelectedImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: filteredImages.map(image => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors\",\n            onClick: () => setSelectedImage(image),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: image.drive_download_url || image.thumbnail_path,\n              alt: image.primary_subject,\n              className: \"w-24 h-24 object-cover rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-medium\",\n                children: image.filename\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-muted-foreground line-clamp-2\",\n                children: image.primary_subject\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4 text-xs text-muted-foreground\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Quality: \", image.visual_quality, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Social: \", image.social_media_score, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Marketing: \", image.marketing_score, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: image.has_people ? `${image.people_count} people` : 'No people'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: image.is_indoor ? 'Indoor' : 'Outdoor'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this)]\n          }, image.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-2 mt-8 pb-6\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => setPage(page - 1),\n            disabled: page <= 1,\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [page > 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: 1 === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(1),\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this), page > 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-2 text-muted-foreground\",\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true), Array.from({\n              length: Math.min(5, totalPages)\n            }, (_, i) => {\n              const pageNum = Math.max(1, Math.min(totalPages - 4, page - 2)) + i;\n              if (pageNum > totalPages) return null;\n              return /*#__PURE__*/_jsxDEV(Button, {\n                variant: pageNum === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(pageNum),\n                children: pageNum\n              }, pageNum, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this);\n            }), page < totalPages - 2 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [page < totalPages - 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-2 text-muted-foreground\",\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 47\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: totalPages === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(totalPages),\n                children: totalPages\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => setPage(page + 1),\n            disabled: page >= totalPages,\n            className: \"flex items-center gap-1\",\n            children: [\"Next\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-4 text-sm text-muted-foreground\",\n            children: [\"Page \", page, \" of \", totalPages, \" (\", totalCount, \" total images)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ImageDetailModal, {\n      image: selectedImage,\n      isOpen: !!selectedImage,\n      onClose: () => setSelectedImage(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n}\n_s(ImageApp, \"YJ7Ba/5/OqM03PNkROGcdpsClkQ=\", false, function () {\n  return [useQuery];\n});\n_c = ImageApp;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n    client: queryClient,\n    children: [/*#__PURE__*/_jsxDEV(ImageApp, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"bottom-right\",\n      toastOptions: {\n        className: 'bg-background text-foreground border border-border'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"ImageApp\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useMemo","QueryClient","QueryClientProvider","useQuery","Toaster","SearchHeader","FilterPanel","MasonryGallery","ImageDetailModal","imageApi","Button","ChevronLeft","ChevronRight","jsxDEV","_jsxDEV","Fragment","_Fragment","queryClient","defaultOptions","queries","staleTime","gcTime","retry","refetchOnWindowFocus","initialFilters","query","visualQuality","hasPeople","undefined","peopleCount","isIndoor","activityTags","season","timeOfDay","socialMediaScore","marketingScore","minWidth","maxWidth","minHeight","maxHeight","aspectRatio","ImageApp","_s","_data$pagination","filters","setFilters","isFiltersOpen","setIsFiltersOpen","viewMode","setViewMode","selectedImage","setSelectedImage","page","setPage","hasActiveFilters","length","data","isLoading","error","queryKey","queryFn","searchImages","limit","sort","order","getImages","status","images","totalCount","pagination","total","totalPages","Math","ceil","filteredImages","filter","image","toLowerCase","searchText","primary_subject","filename","notes","activity_tags","join","includes","visual_quality","has_people","people_count","is_indoor","hasMatchingTag","some","tag","time_of_day","social_media_score","marketing_score","activeFilterCount","count","handleFiltersChange","newFilters","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFiltersChange","onToggleFilters","onViewModeChange","resultCount","isOpen","onToggle","onImageClick","map","onClick","src","drive_download_url","thumbnail_path","alt","id","variant","size","disabled","Array","from","min","_","i","pageNum","max","onClose","_c","App","client","position","toastOptions","_c2","$RefreshReg$"],"sources":["/Users/jasonglaspey/Coding/Lost Valley - Image Management/web-app/client/src/App.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from '@tanstack/react-query';\nimport { Toaster } from 'sonner';\nimport { SearchHeader } from './components/SearchHeader';\nimport { FilterPanel } from './components/FilterPanel';\nimport { ImageCard } from './components/ImageCard';\nimport { MasonryGallery } from './components/MasonryGallery';\nimport { ImageDetailModal } from './components/ImageDetailModal';\nimport { SearchFilters, ProcessedImage } from './types/image';\nimport { imageApi } from './api/client';\nimport { Button } from './components/ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport './App.css';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nconst initialFilters: SearchFilters = {\n  query: '',\n  visualQuality: [1, 5],\n  hasPeople: undefined,\n  peopleCount: [],\n  isIndoor: undefined,\n  activityTags: [],\n  season: [],\n  timeOfDay: [],\n  socialMediaScore: [1, 5],\n  marketingScore: [1, 5],\n  minWidth: undefined,\n  maxWidth: undefined,\n  minHeight: undefined,\n  maxHeight: undefined,\n  aspectRatio: 'any'\n};\n\nfunction ImageApp() {\n  const [filters, setFilters] = useState<SearchFilters>(initialFilters);\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [selectedImage, setSelectedImage] = useState<ProcessedImage | null>(null);\n  const [page, setPage] = useState(1);\n\n  // Check if we're using search or just listing\n  const hasActiveFilters = useMemo(() => {\n    return filters.query !== '' ||\n      filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5 ||\n      filters.hasPeople !== undefined ||\n      filters.peopleCount.length > 0 ||\n      filters.isIndoor !== undefined ||\n      filters.activityTags.length > 0 ||\n      filters.season.length > 0 ||\n      filters.timeOfDay.length > 0 ||\n      filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5 ||\n      filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5 ||\n      filters.minWidth !== undefined ||\n      filters.maxWidth !== undefined ||\n      filters.minHeight !== undefined ||\n      filters.maxHeight !== undefined ||\n      filters.aspectRatio !== 'any';\n  }, [filters]);\n\n  // Query for images\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['images', filters, page, hasActiveFilters],\n    queryFn: async () => {\n      if (hasActiveFilters) {\n        return await imageApi.searchImages({ \n          ...filters, \n          page, \n          limit: 50, \n          sort: 'created_date', \n          order: 'DESC' \n        });\n      } else {\n        return await imageApi.getImages({ \n          page, \n          limit: 50, \n          sort: 'created_date', \n          order: 'DESC',\n          status: 'completed'\n        });\n      }\n    },\n  });\n\n  const images = data?.images || [];\n  const totalCount = data?.pagination?.total || 0;\n  const totalPages = Math.ceil(totalCount / 50);\n\n  // Filter images client-side for better performance\n  const filteredImages = useMemo(() => {\n    if (isLoading) {\n      return [];\n    }\n    \n    return images.filter(image => {\n      // Skip filtering if no filters active - show all images\n      if (!hasActiveFilters) {\n        return true;\n      }\n      // Text search\n      if (filters.query) {\n        const query = filters.query.toLowerCase();\n        const searchText = `${image.primary_subject} ${image.filename} ${image.notes} ${image.activity_tags.join(' ')}`.toLowerCase();\n        if (!searchText.includes(query)) return false;\n      }\n\n      // Visual quality filter\n      if (image.visual_quality < filters.visualQuality[0] || image.visual_quality > filters.visualQuality[1]) {\n        return false;\n      }\n\n      // People filters\n      if (filters.hasPeople !== undefined && image.has_people !== filters.hasPeople) {\n        return false;\n      }\n      if (filters.peopleCount.length > 0 && !filters.peopleCount.includes(image.people_count)) {\n        return false;\n      }\n\n      // Indoor/outdoor filter\n      if (filters.isIndoor !== undefined && image.is_indoor !== filters.isIndoor) {\n        return false;\n      }\n\n      // Activity tags filter\n      if (filters.activityTags.length > 0) {\n        const hasMatchingTag = filters.activityTags.some(tag => image.activity_tags.includes(tag));\n        if (!hasMatchingTag) return false;\n      }\n\n      // Season filter\n      if (filters.season.length > 0 && !filters.season.includes(image.season)) {\n        return false;\n      }\n\n      // Time of day filter\n      if (filters.timeOfDay.length > 0 && !filters.timeOfDay.includes(image.time_of_day)) {\n        return false;\n      }\n\n      // Social media score filter\n      if (image.social_media_score < filters.socialMediaScore[0] || image.social_media_score > filters.socialMediaScore[1]) {\n        return false;\n      }\n\n      // Marketing score filter\n      if (image.marketing_score < filters.marketingScore[0] || image.marketing_score > filters.marketingScore[1]) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [images, filters, hasActiveFilters, isLoading]);\n\n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filters.query) count++;\n    if (filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5) count++;\n    if (filters.hasPeople !== undefined) count++;\n    if (filters.peopleCount.length > 0) count++;\n    if (filters.isIndoor !== undefined) count++;\n    if (filters.activityTags.length > 0) count++;\n    if (filters.season.length > 0) count++;\n    if (filters.timeOfDay.length > 0) count++;\n    if (filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5) count++;\n    if (filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5) count++;\n    return count;\n  }, [filters]);\n\n  const handleFiltersChange = (newFilters: SearchFilters) => {\n    setFilters(newFilters);\n    setPage(1); // Reset to first page when filters change\n  };\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl mb-2\">Failed to load images</h2>\n          <p className=\"text-muted-foreground\">Please check your connection and try again.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      {/* Header */}\n      <div className=\"bg-primary text-primary-foreground p-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          <h1 className=\"text-2xl font-medium\">Lost Valley Image Manager</h1>\n          <p className=\"text-primary-foreground/80 mt-1\">\n            Search and manage your processed permaculture image library\n          </p>\n        </div>\n      </div>\n\n      {/* Search Header */}\n      <SearchHeader\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onToggleFilters={() => setIsFiltersOpen(!isFiltersOpen)}\n        isFiltersOpen={isFiltersOpen}\n        activeFilterCount={activeFilterCount}\n        viewMode={viewMode}\n        onViewModeChange={setViewMode}\n        resultCount={filteredImages.length}\n      />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex\">\n        {/* Filter Panel */}\n        <FilterPanel\n          filters={filters}\n          onFiltersChange={handleFiltersChange}\n          isOpen={isFiltersOpen}\n          onToggle={() => setIsFiltersOpen(!isFiltersOpen)}\n          activeFilterCount={activeFilterCount}\n        />\n\n        {/* Results Area */}\n        <div className=\"flex-1 p-6\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n                <p className=\"text-muted-foreground\">Loading images...</p>\n              </div>\n            </div>\n          ) : filteredImages.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n              <div className=\"text-6xl mb-4\">🔍</div>\n              <h3 className=\"text-lg mb-2\">No images found</h3>\n              <p className=\"text-muted-foreground max-w-md\">\n                Try adjusting your search query or filters to find more images in your collection.\n              </p>\n            </div>\n          ) : viewMode === 'grid' ? (\n            <MasonryGallery \n              images={filteredImages} \n              onImageClick={setSelectedImage}\n            />\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredImages.map((image) => (\n                <div\n                  key={image.id}\n                  className=\"flex gap-4 p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors\"\n                  onClick={() => setSelectedImage(image)}\n                >\n                  <img\n                    src={image.drive_download_url || image.thumbnail_path}\n                    alt={image.primary_subject}\n                    className=\"w-24 h-24 object-cover rounded\"\n                  />\n                  <div className=\"flex-1 space-y-2\">\n                    <h3 className=\"font-medium\">{image.filename}</h3>\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                      {image.primary_subject}\n                    </p>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span>Quality: {image.visual_quality}/5</span>\n                      <span>Social: {image.social_media_score}/5</span>\n                      <span>Marketing: {image.marketing_score}/5</span>\n                      <span>{image.has_people ? `${image.people_count} people` : 'No people'}</span>\n                      <span>{image.is_indoor ? 'Indoor' : 'Outdoor'}</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n          \n          {/* Pagination Controls */}\n          {totalPages > 1 && (\n            <div className=\"flex items-center justify-center gap-2 mt-8 pb-6\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(page - 1)}\n                disabled={page <= 1}\n                className=\"flex items-center gap-1\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n                Previous\n              </Button>\n              \n              <div className=\"flex items-center gap-1\">\n                {/* Show first page */}\n                {page > 3 && (\n                  <>\n                    <Button\n                      variant={1 === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(1)}\n                    >\n                      1\n                    </Button>\n                    {page > 4 && <span className=\"px-2 text-muted-foreground\">...</span>}\n                  </>\n                )}\n                \n                {/* Show pages around current page */}\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                  const pageNum = Math.max(1, Math.min(totalPages - 4, page - 2)) + i;\n                  if (pageNum > totalPages) return null;\n                  \n                  return (\n                    <Button\n                      key={pageNum}\n                      variant={pageNum === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(pageNum)}\n                    >\n                      {pageNum}\n                    </Button>\n                  );\n                })}\n                \n                {/* Show last page */}\n                {page < totalPages - 2 && (\n                  <>\n                    {page < totalPages - 3 && <span className=\"px-2 text-muted-foreground\">...</span>}\n                    <Button\n                      variant={totalPages === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(totalPages)}\n                    >\n                      {totalPages}\n                    </Button>\n                  </>\n                )}\n              </div>\n              \n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(page + 1)}\n                disabled={page >= totalPages}\n                className=\"flex items-center gap-1\"\n              >\n                Next\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n              \n              <div className=\"ml-4 text-sm text-muted-foreground\">\n                Page {page} of {totalPages} ({totalCount} total images)\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Image Detail Modal */}\n      <ImageDetailModal\n        image={selectedImage}\n        isOpen={!!selectedImage}\n        onClose={() => setSelectedImage(null)}\n      />\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ImageApp />\n      <Toaster \n        position=\"bottom-right\"\n        toastOptions={{\n          className: 'bg-background text-foreground border border-border',\n        }}\n      />\n    </QueryClientProvider>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}