{"ast":null,"code":"var _jsxFileName = \"/Users/jasonglaspey/Coding/Lost Valley - Image Management/web-app/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from '@tanstack/react-query';\nimport { Toaster } from 'sonner';\nimport { SearchHeader } from './components/SearchHeader';\nimport { FilterPanel } from './components/FilterPanel';\nimport { ImageCard } from './components/ImageCard';\nimport { ImageDetailModal } from './components/ImageDetailModal';\nimport { imageApi } from './api/client';\nimport { Button } from './components/ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000,\n      // 5 minutes\n      gcTime: 10 * 60 * 1000,\n      // 10 minutes\n      retry: 1,\n      refetchOnWindowFocus: false\n    }\n  }\n});\nconst initialFilters = {\n  query: '',\n  visualQuality: [1, 5],\n  hasPeople: undefined,\n  peopleCount: [],\n  isIndoor: undefined,\n  activityTags: [],\n  season: [],\n  timeOfDay: [],\n  socialMediaScore: [1, 5],\n  marketingScore: [1, 5]\n};\nfunction ImageApp() {\n  _s();\n  const [filters, setFilters] = useState(initialFilters);\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [viewMode, setViewMode] = useState('grid');\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [page, setPage] = useState(1);\n\n  // Check if we're using search or just listing\n  const hasActiveFilters = useMemo(() => {\n    return filters.query !== '' || filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5 || filters.hasPeople !== undefined || filters.peopleCount.length > 0 || filters.isIndoor !== undefined || filters.activityTags.length > 0 || filters.season.length > 0 || filters.timeOfDay.length > 0 || filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5 || filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5;\n  }, [filters]);\n\n  // Query for images\n  const {\n    data,\n    isLoading,\n    error\n  } = useQuery({\n    queryKey: ['images', filters, page, hasActiveFilters],\n    queryFn: async () => {\n      if (hasActiveFilters) {\n        return await imageApi.searchImages({\n          ...filters,\n          page,\n          limit: 50,\n          sort: 'created_date',\n          order: 'DESC'\n        });\n      } else {\n        return await imageApi.getImages({\n          page,\n          limit: 50,\n          sort: 'created_date',\n          order: 'DESC',\n          status: 'completed'\n        });\n      }\n    }\n  });\n  const images = (data === null || data === void 0 ? void 0 : data.images) || [];\n  const totalCount = (data === null || data === void 0 ? void 0 : data.total) || 0;\n  const totalPages = Math.ceil(totalCount / 50);\n\n  // Filter images client-side for better performance\n  const filteredImages = useMemo(() => {\n    if (isLoading) {\n      return [];\n    }\n    return images.filter(image => {\n      // Skip filtering if no filters active - show all images\n      if (!hasActiveFilters) {\n        return true;\n      }\n      // Text search\n      if (filters.query) {\n        const query = filters.query.toLowerCase();\n        const searchText = `${image.primary_subject} ${image.filename} ${image.notes} ${image.activity_tags.join(' ')}`.toLowerCase();\n        if (!searchText.includes(query)) return false;\n      }\n\n      // Visual quality filter\n      if (image.visual_quality < filters.visualQuality[0] || image.visual_quality > filters.visualQuality[1]) {\n        return false;\n      }\n\n      // People filters\n      if (filters.hasPeople !== undefined && image.has_people !== filters.hasPeople) {\n        return false;\n      }\n      if (filters.peopleCount.length > 0 && !filters.peopleCount.includes(image.people_count)) {\n        return false;\n      }\n\n      // Indoor/outdoor filter\n      if (filters.isIndoor !== undefined && image.is_indoor !== filters.isIndoor) {\n        return false;\n      }\n\n      // Activity tags filter\n      if (filters.activityTags.length > 0) {\n        const hasMatchingTag = filters.activityTags.some(tag => image.activity_tags.includes(tag));\n        if (!hasMatchingTag) return false;\n      }\n\n      // Season filter\n      if (filters.season.length > 0 && !filters.season.includes(image.season)) {\n        return false;\n      }\n\n      // Time of day filter\n      if (filters.timeOfDay.length > 0 && !filters.timeOfDay.includes(image.time_of_day)) {\n        return false;\n      }\n\n      // Social media score filter\n      if (image.social_media_score < filters.socialMediaScore[0] || image.social_media_score > filters.socialMediaScore[1]) {\n        return false;\n      }\n\n      // Marketing score filter\n      if (image.marketing_score < filters.marketingScore[0] || image.marketing_score > filters.marketingScore[1]) {\n        return false;\n      }\n      return true;\n    });\n  }, [images, filters, hasActiveFilters, isLoading]);\n\n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filters.query) count++;\n    if (filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5) count++;\n    if (filters.hasPeople !== undefined) count++;\n    if (filters.peopleCount.length > 0) count++;\n    if (filters.isIndoor !== undefined) count++;\n    if (filters.activityTags.length > 0) count++;\n    if (filters.season.length > 0) count++;\n    if (filters.timeOfDay.length > 0) count++;\n    if (filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5) count++;\n    if (filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5) count++;\n    return count;\n  }, [filters]);\n  const handleFiltersChange = newFilters => {\n    setFilters(newFilters);\n    setPage(1); // Reset to first page when filters change\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-background flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl mb-2\",\n          children: \"Failed to load images\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted-foreground\",\n          children: \"Please check your connection and try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-background flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-primary text-primary-foreground p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-medium\",\n          children: \"Lost Valley Image Manager\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-primary-foreground/80 mt-1\",\n          children: \"Search and manage your processed permaculture image library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchHeader, {\n      filters: filters,\n      onFiltersChange: handleFiltersChange,\n      onToggleFilters: () => setIsFiltersOpen(!isFiltersOpen),\n      isFiltersOpen: isFiltersOpen,\n      activeFilterCount: activeFilterCount,\n      viewMode: viewMode,\n      onViewModeChange: setViewMode,\n      resultCount: filteredImages.length\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex\",\n      children: [/*#__PURE__*/_jsxDEV(FilterPanel, {\n        filters: filters,\n        onFiltersChange: handleFiltersChange,\n        isOpen: isFiltersOpen,\n        onToggle: () => setIsFiltersOpen(!isFiltersOpen),\n        activeFilterCount: activeFilterCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-6\",\n        children: [isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center py-16\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted-foreground\",\n              children: \"Loading images...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this) : filteredImages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center py-16 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-6xl mb-4\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg mb-2\",\n            children: \"No images found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-muted-foreground max-w-md\",\n            children: \"Try adjusting your search query or filters to find more images in your collection.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this) : viewMode === 'grid' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",\n          children: filteredImages.map(image => /*#__PURE__*/_jsxDEV(ImageCard, {\n            image: image,\n            onClick: () => setSelectedImage(image)\n          }, image.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: filteredImages.map(image => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-4 p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors\",\n            onClick: () => setSelectedImage(image),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: image.drive_download_url || image.thumbnail_path,\n              alt: image.primary_subject,\n              className: \"w-24 h-24 object-cover rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-medium\",\n                children: image.filename\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-muted-foreground line-clamp-2\",\n                children: image.primary_subject\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-4 text-xs text-muted-foreground\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Quality: \", image.visual_quality, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Social: \", image.social_media_score, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Marketing: \", image.marketing_score, \"/5\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: image.has_people ? `${image.people_count} people` : 'No people'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: image.is_indoor ? 'Indoor' : 'Outdoor'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this)]\n          }, image.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-2 mt-8 pb-6\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => setPage(page - 1),\n            disabled: page <= 1,\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), \"Previous\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1\",\n            children: [page > 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: 1 === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(1),\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), page > 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-2 text-muted-foreground\",\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true), Array.from({\n              length: Math.min(5, totalPages)\n            }, (_, i) => {\n              const pageNum = Math.max(1, Math.min(totalPages - 4, page - 2)) + i;\n              if (pageNum > totalPages) return null;\n              return /*#__PURE__*/_jsxDEV(Button, {\n                variant: pageNum === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(pageNum),\n                children: pageNum\n              }, pageNum, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this);\n            }), page < totalPages - 2 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [page < totalPages - 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"px-2 text-muted-foreground\",\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 47\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: totalPages === page ? \"default\" : \"outline\",\n                size: \"sm\",\n                onClick: () => setPage(totalPages),\n                children: totalPages\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: () => setPage(page + 1),\n            disabled: page >= totalPages,\n            className: \"flex items-center gap-1\",\n            children: [\"Next\", /*#__PURE__*/_jsxDEV(ChevronRight, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-4 text-sm text-muted-foreground\",\n            children: [\"Page \", page, \" of \", totalPages, \" (\", totalCount, \" total images)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ImageDetailModal, {\n      image: selectedImage,\n      isOpen: !!selectedImage,\n      onClose: () => setSelectedImage(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s(ImageApp, \"YJ7Ba/5/OqM03PNkROGcdpsClkQ=\", false, function () {\n  return [useQuery];\n});\n_c = ImageApp;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n    client: queryClient,\n    children: [/*#__PURE__*/_jsxDEV(ImageApp, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toaster, {\n      position: \"bottom-right\",\n      toastOptions: {\n        className: 'bg-background text-foreground border border-border'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 370,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"ImageApp\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useMemo","QueryClient","QueryClientProvider","useQuery","Toaster","SearchHeader","FilterPanel","ImageCard","ImageDetailModal","imageApi","Button","ChevronLeft","ChevronRight","jsxDEV","_jsxDEV","Fragment","_Fragment","queryClient","defaultOptions","queries","staleTime","gcTime","retry","refetchOnWindowFocus","initialFilters","query","visualQuality","hasPeople","undefined","peopleCount","isIndoor","activityTags","season","timeOfDay","socialMediaScore","marketingScore","ImageApp","_s","filters","setFilters","isFiltersOpen","setIsFiltersOpen","viewMode","setViewMode","selectedImage","setSelectedImage","page","setPage","hasActiveFilters","length","data","isLoading","error","queryKey","queryFn","searchImages","limit","sort","order","getImages","status","images","totalCount","total","totalPages","Math","ceil","filteredImages","filter","image","toLowerCase","searchText","primary_subject","filename","notes","activity_tags","join","includes","visual_quality","has_people","people_count","is_indoor","hasMatchingTag","some","tag","time_of_day","social_media_score","marketing_score","activeFilterCount","count","handleFiltersChange","newFilters","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFiltersChange","onToggleFilters","onViewModeChange","resultCount","isOpen","onToggle","map","onClick","id","src","drive_download_url","thumbnail_path","alt","variant","size","disabled","Array","from","min","_","i","pageNum","max","onClose","_c","App","client","position","toastOptions","_c2","$RefreshReg$"],"sources":["/Users/jasonglaspey/Coding/Lost Valley - Image Management/web-app/client/src/App.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from '@tanstack/react-query';\nimport { Toaster } from 'sonner';\nimport { SearchHeader } from './components/SearchHeader';\nimport { FilterPanel } from './components/FilterPanel';\nimport { ImageCard } from './components/ImageCard';\nimport { ImageDetailModal } from './components/ImageDetailModal';\nimport { SearchFilters, ProcessedImage } from './types/image';\nimport { imageApi } from './api/client';\nimport { Button } from './components/ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport './App.css';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nconst initialFilters: SearchFilters = {\n  query: '',\n  visualQuality: [1, 5],\n  hasPeople: undefined,\n  peopleCount: [],\n  isIndoor: undefined,\n  activityTags: [],\n  season: [],\n  timeOfDay: [],\n  socialMediaScore: [1, 5],\n  marketingScore: [1, 5]\n};\n\nfunction ImageApp() {\n  const [filters, setFilters] = useState<SearchFilters>(initialFilters);\n  const [isFiltersOpen, setIsFiltersOpen] = useState(false);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [selectedImage, setSelectedImage] = useState<ProcessedImage | null>(null);\n  const [page, setPage] = useState(1);\n\n  // Check if we're using search or just listing\n  const hasActiveFilters = useMemo(() => {\n    return filters.query !== '' ||\n      filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5 ||\n      filters.hasPeople !== undefined ||\n      filters.peopleCount.length > 0 ||\n      filters.isIndoor !== undefined ||\n      filters.activityTags.length > 0 ||\n      filters.season.length > 0 ||\n      filters.timeOfDay.length > 0 ||\n      filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5 ||\n      filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5;\n  }, [filters]);\n\n  // Query for images\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['images', filters, page, hasActiveFilters],\n    queryFn: async () => {\n      if (hasActiveFilters) {\n        return await imageApi.searchImages({ \n          ...filters, \n          page, \n          limit: 50, \n          sort: 'created_date', \n          order: 'DESC' \n        });\n      } else {\n        return await imageApi.getImages({ \n          page, \n          limit: 50, \n          sort: 'created_date', \n          order: 'DESC',\n          status: 'completed'\n        });\n      }\n    },\n  });\n\n  const images = data?.images || [];\n  const totalCount = data?.total || 0;\n  const totalPages = Math.ceil(totalCount / 50);\n\n  // Filter images client-side for better performance\n  const filteredImages = useMemo(() => {\n    if (isLoading) {\n      return [];\n    }\n    \n    return images.filter(image => {\n      // Skip filtering if no filters active - show all images\n      if (!hasActiveFilters) {\n        return true;\n      }\n      // Text search\n      if (filters.query) {\n        const query = filters.query.toLowerCase();\n        const searchText = `${image.primary_subject} ${image.filename} ${image.notes} ${image.activity_tags.join(' ')}`.toLowerCase();\n        if (!searchText.includes(query)) return false;\n      }\n\n      // Visual quality filter\n      if (image.visual_quality < filters.visualQuality[0] || image.visual_quality > filters.visualQuality[1]) {\n        return false;\n      }\n\n      // People filters\n      if (filters.hasPeople !== undefined && image.has_people !== filters.hasPeople) {\n        return false;\n      }\n      if (filters.peopleCount.length > 0 && !filters.peopleCount.includes(image.people_count)) {\n        return false;\n      }\n\n      // Indoor/outdoor filter\n      if (filters.isIndoor !== undefined && image.is_indoor !== filters.isIndoor) {\n        return false;\n      }\n\n      // Activity tags filter\n      if (filters.activityTags.length > 0) {\n        const hasMatchingTag = filters.activityTags.some(tag => image.activity_tags.includes(tag));\n        if (!hasMatchingTag) return false;\n      }\n\n      // Season filter\n      if (filters.season.length > 0 && !filters.season.includes(image.season)) {\n        return false;\n      }\n\n      // Time of day filter\n      if (filters.timeOfDay.length > 0 && !filters.timeOfDay.includes(image.time_of_day)) {\n        return false;\n      }\n\n      // Social media score filter\n      if (image.social_media_score < filters.socialMediaScore[0] || image.social_media_score > filters.socialMediaScore[1]) {\n        return false;\n      }\n\n      // Marketing score filter\n      if (image.marketing_score < filters.marketingScore[0] || image.marketing_score > filters.marketingScore[1]) {\n        return false;\n      }\n\n      return true;\n    });\n  }, [images, filters, hasActiveFilters, isLoading]);\n\n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filters.query) count++;\n    if (filters.visualQuality[0] > 1 || filters.visualQuality[1] < 5) count++;\n    if (filters.hasPeople !== undefined) count++;\n    if (filters.peopleCount.length > 0) count++;\n    if (filters.isIndoor !== undefined) count++;\n    if (filters.activityTags.length > 0) count++;\n    if (filters.season.length > 0) count++;\n    if (filters.timeOfDay.length > 0) count++;\n    if (filters.socialMediaScore[0] > 1 || filters.socialMediaScore[1] < 5) count++;\n    if (filters.marketingScore[0] > 1 || filters.marketingScore[1] < 5) count++;\n    return count;\n  }, [filters]);\n\n  const handleFiltersChange = (newFilters: SearchFilters) => {\n    setFilters(newFilters);\n    setPage(1); // Reset to first page when filters change\n  };\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-xl mb-2\">Failed to load images</h2>\n          <p className=\"text-muted-foreground\">Please check your connection and try again.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      {/* Header */}\n      <div className=\"bg-primary text-primary-foreground p-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          <h1 className=\"text-2xl font-medium\">Lost Valley Image Manager</h1>\n          <p className=\"text-primary-foreground/80 mt-1\">\n            Search and manage your processed permaculture image library\n          </p>\n        </div>\n      </div>\n\n      {/* Search Header */}\n      <SearchHeader\n        filters={filters}\n        onFiltersChange={handleFiltersChange}\n        onToggleFilters={() => setIsFiltersOpen(!isFiltersOpen)}\n        isFiltersOpen={isFiltersOpen}\n        activeFilterCount={activeFilterCount}\n        viewMode={viewMode}\n        onViewModeChange={setViewMode}\n        resultCount={filteredImages.length}\n      />\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex\">\n        {/* Filter Panel */}\n        <FilterPanel\n          filters={filters}\n          onFiltersChange={handleFiltersChange}\n          isOpen={isFiltersOpen}\n          onToggle={() => setIsFiltersOpen(!isFiltersOpen)}\n          activeFilterCount={activeFilterCount}\n        />\n\n        {/* Results Area */}\n        <div className=\"flex-1 p-6\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-16\">\n              <div className=\"text-center\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n                <p className=\"text-muted-foreground\">Loading images...</p>\n              </div>\n            </div>\n          ) : filteredImages.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n              <div className=\"text-6xl mb-4\">🔍</div>\n              <h3 className=\"text-lg mb-2\">No images found</h3>\n              <p className=\"text-muted-foreground max-w-md\">\n                Try adjusting your search query or filters to find more images in your collection.\n              </p>\n            </div>\n          ) : viewMode === 'grid' ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n              {filteredImages.map((image) => (\n                <ImageCard\n                  key={image.id}\n                  image={image}\n                  onClick={() => setSelectedImage(image)}\n                />\n              ))}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredImages.map((image) => (\n                <div\n                  key={image.id}\n                  className=\"flex gap-4 p-4 border rounded-lg hover:bg-muted/50 cursor-pointer transition-colors\"\n                  onClick={() => setSelectedImage(image)}\n                >\n                  <img\n                    src={image.drive_download_url || image.thumbnail_path}\n                    alt={image.primary_subject}\n                    className=\"w-24 h-24 object-cover rounded\"\n                  />\n                  <div className=\"flex-1 space-y-2\">\n                    <h3 className=\"font-medium\">{image.filename}</h3>\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                      {image.primary_subject}\n                    </p>\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n                      <span>Quality: {image.visual_quality}/5</span>\n                      <span>Social: {image.social_media_score}/5</span>\n                      <span>Marketing: {image.marketing_score}/5</span>\n                      <span>{image.has_people ? `${image.people_count} people` : 'No people'}</span>\n                      <span>{image.is_indoor ? 'Indoor' : 'Outdoor'}</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n          \n          {/* Pagination Controls */}\n          {totalPages > 1 && (\n            <div className=\"flex items-center justify-center gap-2 mt-8 pb-6\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(page - 1)}\n                disabled={page <= 1}\n                className=\"flex items-center gap-1\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n                Previous\n              </Button>\n              \n              <div className=\"flex items-center gap-1\">\n                {/* Show first page */}\n                {page > 3 && (\n                  <>\n                    <Button\n                      variant={1 === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(1)}\n                    >\n                      1\n                    </Button>\n                    {page > 4 && <span className=\"px-2 text-muted-foreground\">...</span>}\n                  </>\n                )}\n                \n                {/* Show pages around current page */}\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                  const pageNum = Math.max(1, Math.min(totalPages - 4, page - 2)) + i;\n                  if (pageNum > totalPages) return null;\n                  \n                  return (\n                    <Button\n                      key={pageNum}\n                      variant={pageNum === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(pageNum)}\n                    >\n                      {pageNum}\n                    </Button>\n                  );\n                })}\n                \n                {/* Show last page */}\n                {page < totalPages - 2 && (\n                  <>\n                    {page < totalPages - 3 && <span className=\"px-2 text-muted-foreground\">...</span>}\n                    <Button\n                      variant={totalPages === page ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setPage(totalPages)}\n                    >\n                      {totalPages}\n                    </Button>\n                  </>\n                )}\n              </div>\n              \n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setPage(page + 1)}\n                disabled={page >= totalPages}\n                className=\"flex items-center gap-1\"\n              >\n                Next\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n              \n              <div className=\"ml-4 text-sm text-muted-foreground\">\n                Page {page} of {totalPages} ({totalCount} total images)\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Image Detail Modal */}\n      <ImageDetailModal\n        image={selectedImage}\n        isOpen={!!selectedImage}\n        onClose={() => setSelectedImage(null)}\n      />\n    </div>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ImageApp />\n      <Toaster \n        position=\"bottom-right\"\n        toastOptions={{\n          className: 'bg-background text-foreground border border-border',\n        }}\n      />\n    </QueryClientProvider>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AAChD,SAASC,WAAW,EAAEC,mBAAmB,EAAEC,QAAQ,QAAQ,uBAAuB;AAClF,SAASC,OAAO,QAAQ,QAAQ;AAChC,SAASC,YAAY,QAAQ,2BAA2B;AACxD,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,SAAS,QAAQ,wBAAwB;AAClD,SAASC,gBAAgB,QAAQ,+BAA+B;AAEhE,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,SAASC,WAAW,EAAEC,YAAY,QAAQ,cAAc;AACxD,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEnB,MAAMC,WAAW,GAAG,IAAIhB,WAAW,CAAC;EAClCiB,cAAc,EAAE;IACdC,OAAO,EAAE;MACPC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,IAAI;MAAE;MAC1BC,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;MAAE;MACxBC,KAAK,EAAE,CAAC;MACRC,oBAAoB,EAAE;IACxB;EACF;AACF,CAAC,CAAC;AAEF,MAAMC,cAA6B,GAAG;EACpCC,KAAK,EAAE,EAAE;EACTC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACrBC,SAAS,EAAEC,SAAS;EACpBC,WAAW,EAAE,EAAE;EACfC,QAAQ,EAAEF,SAAS;EACnBG,YAAY,EAAE,EAAE;EAChBC,MAAM,EAAE,EAAE;EACVC,SAAS,EAAE,EAAE;EACbC,gBAAgB,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACxBC,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC;AACvB,CAAC;AAED,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGxC,QAAQ,CAAgByB,cAAc,CAAC;EACrE,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAG1C,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC2C,QAAQ,EAAEC,WAAW,CAAC,GAAG5C,QAAQ,CAAkB,MAAM,CAAC;EACjE,MAAM,CAAC6C,aAAa,EAAEC,gBAAgB,CAAC,GAAG9C,QAAQ,CAAwB,IAAI,CAAC;EAC/E,MAAM,CAAC+C,IAAI,EAAEC,OAAO,CAAC,GAAGhD,QAAQ,CAAC,CAAC,CAAC;;EAEnC;EACA,MAAMiD,gBAAgB,GAAGhD,OAAO,CAAC,MAAM;IACrC,OAAOsC,OAAO,CAACb,KAAK,KAAK,EAAE,IACzBa,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIY,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAC5DY,OAAO,CAACX,SAAS,KAAKC,SAAS,IAC/BU,OAAO,CAACT,WAAW,CAACoB,MAAM,GAAG,CAAC,IAC9BX,OAAO,CAACR,QAAQ,KAAKF,SAAS,IAC9BU,OAAO,CAACP,YAAY,CAACkB,MAAM,GAAG,CAAC,IAC/BX,OAAO,CAACN,MAAM,CAACiB,MAAM,GAAG,CAAC,IACzBX,OAAO,CAACL,SAAS,CAACgB,MAAM,GAAG,CAAC,IAC5BX,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,IAAII,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,IAClEI,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIG,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC;EAClE,CAAC,EAAE,CAACG,OAAO,CAAC,CAAC;;EAEb;EACA,MAAM;IAAEY,IAAI;IAAEC,SAAS;IAAEC;EAAM,CAAC,GAAGjD,QAAQ,CAAC;IAC1CkD,QAAQ,EAAE,CAAC,QAAQ,EAAEf,OAAO,EAAEQ,IAAI,EAAEE,gBAAgB,CAAC;IACrDM,OAAO,EAAE,MAAAA,CAAA,KAAY;MACnB,IAAIN,gBAAgB,EAAE;QACpB,OAAO,MAAMvC,QAAQ,CAAC8C,YAAY,CAAC;UACjC,GAAGjB,OAAO;UACVQ,IAAI;UACJU,KAAK,EAAE,EAAE;UACTC,IAAI,EAAE,cAAc;UACpBC,KAAK,EAAE;QACT,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,OAAO,MAAMjD,QAAQ,CAACkD,SAAS,CAAC;UAC9Bb,IAAI;UACJU,KAAK,EAAE,EAAE;UACTC,IAAI,EAAE,cAAc;UACpBC,KAAK,EAAE,MAAM;UACbE,MAAM,EAAE;QACV,CAAC,CAAC;MACJ;IACF;EACF,CAAC,CAAC;EAEF,MAAMC,MAAM,GAAG,CAAAX,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEW,MAAM,KAAI,EAAE;EACjC,MAAMC,UAAU,GAAG,CAAAZ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEa,KAAK,KAAI,CAAC;EACnC,MAAMC,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACJ,UAAU,GAAG,EAAE,CAAC;;EAE7C;EACA,MAAMK,cAAc,GAAGnE,OAAO,CAAC,MAAM;IACnC,IAAImD,SAAS,EAAE;MACb,OAAO,EAAE;IACX;IAEA,OAAOU,MAAM,CAACO,MAAM,CAACC,KAAK,IAAI;MAC5B;MACA,IAAI,CAACrB,gBAAgB,EAAE;QACrB,OAAO,IAAI;MACb;MACA;MACA,IAAIV,OAAO,CAACb,KAAK,EAAE;QACjB,MAAMA,KAAK,GAAGa,OAAO,CAACb,KAAK,CAAC6C,WAAW,CAAC,CAAC;QACzC,MAAMC,UAAU,GAAG,GAAGF,KAAK,CAACG,eAAe,IAAIH,KAAK,CAACI,QAAQ,IAAIJ,KAAK,CAACK,KAAK,IAAIL,KAAK,CAACM,aAAa,CAACC,IAAI,CAAC,GAAG,CAAC,EAAE,CAACN,WAAW,CAAC,CAAC;QAC7H,IAAI,CAACC,UAAU,CAACM,QAAQ,CAACpD,KAAK,CAAC,EAAE,OAAO,KAAK;MAC/C;;MAEA;MACA,IAAI4C,KAAK,CAACS,cAAc,GAAGxC,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,IAAI2C,KAAK,CAACS,cAAc,GAAGxC,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,EAAE;QACtG,OAAO,KAAK;MACd;;MAEA;MACA,IAAIY,OAAO,CAACX,SAAS,KAAKC,SAAS,IAAIyC,KAAK,CAACU,UAAU,KAAKzC,OAAO,CAACX,SAAS,EAAE;QAC7E,OAAO,KAAK;MACd;MACA,IAAIW,OAAO,CAACT,WAAW,CAACoB,MAAM,GAAG,CAAC,IAAI,CAACX,OAAO,CAACT,WAAW,CAACgD,QAAQ,CAACR,KAAK,CAACW,YAAY,CAAC,EAAE;QACvF,OAAO,KAAK;MACd;;MAEA;MACA,IAAI1C,OAAO,CAACR,QAAQ,KAAKF,SAAS,IAAIyC,KAAK,CAACY,SAAS,KAAK3C,OAAO,CAACR,QAAQ,EAAE;QAC1E,OAAO,KAAK;MACd;;MAEA;MACA,IAAIQ,OAAO,CAACP,YAAY,CAACkB,MAAM,GAAG,CAAC,EAAE;QACnC,MAAMiC,cAAc,GAAG5C,OAAO,CAACP,YAAY,CAACoD,IAAI,CAACC,GAAG,IAAIf,KAAK,CAACM,aAAa,CAACE,QAAQ,CAACO,GAAG,CAAC,CAAC;QAC1F,IAAI,CAACF,cAAc,EAAE,OAAO,KAAK;MACnC;;MAEA;MACA,IAAI5C,OAAO,CAACN,MAAM,CAACiB,MAAM,GAAG,CAAC,IAAI,CAACX,OAAO,CAACN,MAAM,CAAC6C,QAAQ,CAACR,KAAK,CAACrC,MAAM,CAAC,EAAE;QACvE,OAAO,KAAK;MACd;;MAEA;MACA,IAAIM,OAAO,CAACL,SAAS,CAACgB,MAAM,GAAG,CAAC,IAAI,CAACX,OAAO,CAACL,SAAS,CAAC4C,QAAQ,CAACR,KAAK,CAACgB,WAAW,CAAC,EAAE;QAClF,OAAO,KAAK;MACd;;MAEA;MACA,IAAIhB,KAAK,CAACiB,kBAAkB,GAAGhD,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,IAAImC,KAAK,CAACiB,kBAAkB,GAAGhD,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,EAAE;QACpH,OAAO,KAAK;MACd;;MAEA;MACA,IAAImC,KAAK,CAACkB,eAAe,GAAGjD,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,IAAIkC,KAAK,CAACkB,eAAe,GAAGjD,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,EAAE;QAC1G,OAAO,KAAK;MACd;MAEA,OAAO,IAAI;IACb,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC0B,MAAM,EAAEvB,OAAO,EAAEU,gBAAgB,EAAEG,SAAS,CAAC,CAAC;;EAElD;EACA,MAAMqC,iBAAiB,GAAGxF,OAAO,CAAC,MAAM;IACtC,IAAIyF,KAAK,GAAG,CAAC;IACb,IAAInD,OAAO,CAACb,KAAK,EAAEgE,KAAK,EAAE;IAC1B,IAAInD,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIY,OAAO,CAACZ,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE+D,KAAK,EAAE;IACzE,IAAInD,OAAO,CAACX,SAAS,KAAKC,SAAS,EAAE6D,KAAK,EAAE;IAC5C,IAAInD,OAAO,CAACT,WAAW,CAACoB,MAAM,GAAG,CAAC,EAAEwC,KAAK,EAAE;IAC3C,IAAInD,OAAO,CAACR,QAAQ,KAAKF,SAAS,EAAE6D,KAAK,EAAE;IAC3C,IAAInD,OAAO,CAACP,YAAY,CAACkB,MAAM,GAAG,CAAC,EAAEwC,KAAK,EAAE;IAC5C,IAAInD,OAAO,CAACN,MAAM,CAACiB,MAAM,GAAG,CAAC,EAAEwC,KAAK,EAAE;IACtC,IAAInD,OAAO,CAACL,SAAS,CAACgB,MAAM,GAAG,CAAC,EAAEwC,KAAK,EAAE;IACzC,IAAInD,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,IAAII,OAAO,CAACJ,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEuD,KAAK,EAAE;IAC/E,IAAInD,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIG,OAAO,CAACH,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEsD,KAAK,EAAE;IAC3E,OAAOA,KAAK;EACd,CAAC,EAAE,CAACnD,OAAO,CAAC,CAAC;EAEb,MAAMoD,mBAAmB,GAAIC,UAAyB,IAAK;IACzDpD,UAAU,CAACoD,UAAU,CAAC;IACtB5C,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC;EAED,IAAIK,KAAK,EAAE;IACT,oBACEtC,OAAA;MAAK8E,SAAS,EAAC,6DAA6D;MAAAC,QAAA,eAC1E/E,OAAA;QAAK8E,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1B/E,OAAA;UAAI8E,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAqB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvDnF,OAAA;UAAG8E,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAA2C;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACEnF,OAAA;IAAK8E,SAAS,EAAC,0CAA0C;IAAAC,QAAA,gBAEvD/E,OAAA;MAAK8E,SAAS,EAAC,wCAAwC;MAAAC,QAAA,eACrD/E,OAAA;QAAK8E,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAChC/E,OAAA;UAAI8E,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAC;QAAyB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACnEnF,OAAA;UAAG8E,SAAS,EAAC,iCAAiC;UAAAC,QAAA,EAAC;QAE/C;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNnF,OAAA,CAACT,YAAY;MACXiC,OAAO,EAAEA,OAAQ;MACjB4D,eAAe,EAAER,mBAAoB;MACrCS,eAAe,EAAEA,CAAA,KAAM1D,gBAAgB,CAAC,CAACD,aAAa,CAAE;MACxDA,aAAa,EAAEA,aAAc;MAC7BgD,iBAAiB,EAAEA,iBAAkB;MACrC9C,QAAQ,EAAEA,QAAS;MACnB0D,gBAAgB,EAAEzD,WAAY;MAC9B0D,WAAW,EAAElC,cAAc,CAAClB;IAAO;MAAA6C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpC,CAAC,eAGFnF,OAAA;MAAK8E,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAE1B/E,OAAA,CAACR,WAAW;QACVgC,OAAO,EAAEA,OAAQ;QACjB4D,eAAe,EAAER,mBAAoB;QACrCY,MAAM,EAAE9D,aAAc;QACtB+D,QAAQ,EAAEA,CAAA,KAAM9D,gBAAgB,CAAC,CAACD,aAAa,CAAE;QACjDgD,iBAAiB,EAAEA;MAAkB;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC,eAGFnF,OAAA;QAAK8E,SAAS,EAAC,YAAY;QAAAC,QAAA,GACxB1C,SAAS,gBACRrC,OAAA;UAAK8E,SAAS,EAAC,wCAAwC;UAAAC,QAAA,eACrD/E,OAAA;YAAK8E,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC1B/E,OAAA;cAAK8E,SAAS,EAAC;YAA0E;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAChGnF,OAAA;cAAG8E,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAiB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvD;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,GACJ9B,cAAc,CAAClB,MAAM,KAAK,CAAC,gBAC7BnC,OAAA;UAAK8E,SAAS,EAAC,6DAA6D;UAAAC,QAAA,gBAC1E/E,OAAA;YAAK8E,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACvCnF,OAAA;YAAI8E,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACjDnF,OAAA;YAAG8E,SAAS,EAAC,gCAAgC;YAAAC,QAAA,EAAC;UAE9C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,GACJvD,QAAQ,KAAK,MAAM,gBACrB5B,OAAA;UAAK8E,SAAS,EAAC,qEAAqE;UAAAC,QAAA,EACjF1B,cAAc,CAACqC,GAAG,CAAEnC,KAAK,iBACxBvD,OAAA,CAACP,SAAS;YAER8D,KAAK,EAAEA,KAAM;YACboC,OAAO,EAAEA,CAAA,KAAM5D,gBAAgB,CAACwB,KAAK;UAAE,GAFlCA,KAAK,CAACqC,EAAE;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAGd,CACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,gBAENnF,OAAA;UAAK8E,SAAS,EAAC,WAAW;UAAAC,QAAA,EACvB1B,cAAc,CAACqC,GAAG,CAAEnC,KAAK,iBACxBvD,OAAA;YAEE8E,SAAS,EAAC,qFAAqF;YAC/Fa,OAAO,EAAEA,CAAA,KAAM5D,gBAAgB,CAACwB,KAAK,CAAE;YAAAwB,QAAA,gBAEvC/E,OAAA;cACE6F,GAAG,EAAEtC,KAAK,CAACuC,kBAAkB,IAAIvC,KAAK,CAACwC,cAAe;cACtDC,GAAG,EAAEzC,KAAK,CAACG,eAAgB;cAC3BoB,SAAS,EAAC;YAAgC;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,eACFnF,OAAA;cAAK8E,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B/E,OAAA;gBAAI8E,SAAS,EAAC,aAAa;gBAAAC,QAAA,EAAExB,KAAK,CAACI;cAAQ;gBAAAqB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjDnF,OAAA;gBAAG8E,SAAS,EAAC,4CAA4C;gBAAAC,QAAA,EACtDxB,KAAK,CAACG;cAAe;gBAAAsB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrB,CAAC,eACJnF,OAAA;gBAAK8E,SAAS,EAAC,uDAAuD;gBAAAC,QAAA,gBACpE/E,OAAA;kBAAA+E,QAAA,GAAM,WAAS,EAACxB,KAAK,CAACS,cAAc,EAAC,IAAE;gBAAA;kBAAAgB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC9CnF,OAAA;kBAAA+E,QAAA,GAAM,UAAQ,EAACxB,KAAK,CAACiB,kBAAkB,EAAC,IAAE;gBAAA;kBAAAQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjDnF,OAAA;kBAAA+E,QAAA,GAAM,aAAW,EAACxB,KAAK,CAACkB,eAAe,EAAC,IAAE;gBAAA;kBAAAO,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACjDnF,OAAA;kBAAA+E,QAAA,EAAOxB,KAAK,CAACU,UAAU,GAAG,GAAGV,KAAK,CAACW,YAAY,SAAS,GAAG;gBAAW;kBAAAc,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC9EnF,OAAA;kBAAA+E,QAAA,EAAOxB,KAAK,CAACY,SAAS,GAAG,QAAQ,GAAG;gBAAS;kBAAAa,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA,GArBD5B,KAAK,CAACqC,EAAE;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAsBV,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CACN,EAGAjC,UAAU,GAAG,CAAC,iBACblD,OAAA;UAAK8E,SAAS,EAAC,kDAAkD;UAAAC,QAAA,gBAC/D/E,OAAA,CAACJ,MAAM;YACLqG,OAAO,EAAC,SAAS;YACjBC,IAAI,EAAC,IAAI;YACTP,OAAO,EAAEA,CAAA,KAAM1D,OAAO,CAACD,IAAI,GAAG,CAAC,CAAE;YACjCmE,QAAQ,EAAEnE,IAAI,IAAI,CAAE;YACpB8C,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBAEnC/E,OAAA,CAACH,WAAW;cAACiF,SAAS,EAAC;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,YAErC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAETnF,OAAA;YAAK8E,SAAS,EAAC,yBAAyB;YAAAC,QAAA,GAErC/C,IAAI,GAAG,CAAC,iBACPhC,OAAA,CAAAE,SAAA;cAAA6E,QAAA,gBACE/E,OAAA,CAACJ,MAAM;gBACLqG,OAAO,EAAE,CAAC,KAAKjE,IAAI,GAAG,SAAS,GAAG,SAAU;gBAC5CkE,IAAI,EAAC,IAAI;gBACTP,OAAO,EAAEA,CAAA,KAAM1D,OAAO,CAAC,CAAC,CAAE;gBAAA8C,QAAA,EAC3B;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EACRnD,IAAI,GAAG,CAAC,iBAAIhC,OAAA;gBAAM8E,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAC;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,eACpE,CACH,EAGAiB,KAAK,CAACC,IAAI,CAAC;cAAElE,MAAM,EAAEgB,IAAI,CAACmD,GAAG,CAAC,CAAC,EAAEpD,UAAU;YAAE,CAAC,EAAE,CAACqD,CAAC,EAAEC,CAAC,KAAK;cACzD,MAAMC,OAAO,GAAGtD,IAAI,CAACuD,GAAG,CAAC,CAAC,EAAEvD,IAAI,CAACmD,GAAG,CAACpD,UAAU,GAAG,CAAC,EAAElB,IAAI,GAAG,CAAC,CAAC,CAAC,GAAGwE,CAAC;cACnE,IAAIC,OAAO,GAAGvD,UAAU,EAAE,OAAO,IAAI;cAErC,oBACElD,OAAA,CAACJ,MAAM;gBAELqG,OAAO,EAAEQ,OAAO,KAAKzE,IAAI,GAAG,SAAS,GAAG,SAAU;gBAClDkE,IAAI,EAAC,IAAI;gBACTP,OAAO,EAAEA,CAAA,KAAM1D,OAAO,CAACwE,OAAO,CAAE;gBAAA1B,QAAA,EAE/B0B;cAAO,GALHA,OAAO;gBAAAzB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAMN,CAAC;YAEb,CAAC,CAAC,EAGDnD,IAAI,GAAGkB,UAAU,GAAG,CAAC,iBACpBlD,OAAA,CAAAE,SAAA;cAAA6E,QAAA,GACG/C,IAAI,GAAGkB,UAAU,GAAG,CAAC,iBAAIlD,OAAA;gBAAM8E,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAC;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACjFnF,OAAA,CAACJ,MAAM;gBACLqG,OAAO,EAAE/C,UAAU,KAAKlB,IAAI,GAAG,SAAS,GAAG,SAAU;gBACrDkE,IAAI,EAAC,IAAI;gBACTP,OAAO,EAAEA,CAAA,KAAM1D,OAAO,CAACiB,UAAU,CAAE;gBAAA6B,QAAA,EAElC7B;cAAU;gBAAA8B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA,eACT,CACH;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENnF,OAAA,CAACJ,MAAM;YACLqG,OAAO,EAAC,SAAS;YACjBC,IAAI,EAAC,IAAI;YACTP,OAAO,EAAEA,CAAA,KAAM1D,OAAO,CAACD,IAAI,GAAG,CAAC,CAAE;YACjCmE,QAAQ,EAAEnE,IAAI,IAAIkB,UAAW;YAC7B4B,SAAS,EAAC,yBAAyB;YAAAC,QAAA,GACpC,MAEC,eAAA/E,OAAA,CAACF,YAAY;cAACgF,SAAS,EAAC;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B,CAAC,eAETnF,OAAA;YAAK8E,SAAS,EAAC,oCAAoC;YAAAC,QAAA,GAAC,OAC7C,EAAC/C,IAAI,EAAC,MAAI,EAACkB,UAAU,EAAC,IAAE,EAACF,UAAU,EAAC,gBAC3C;UAAA;YAAAgC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNnF,OAAA,CAACN,gBAAgB;MACf6D,KAAK,EAAEzB,aAAc;MACrB0D,MAAM,EAAE,CAAC,CAAC1D,aAAc;MACxB6E,OAAO,EAAEA,CAAA,KAAM5E,gBAAgB,CAAC,IAAI;IAAE;MAAAiD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV;AAAC5D,EAAA,CAxUQD,QAAQ;EAAA,QAsBoBjC,QAAQ;AAAA;AAAAuH,EAAA,GAtBpCtF,QAAQ;AA0UjB,eAAe,SAASuF,GAAGA,CAAA,EAAG;EAC5B,oBACE7G,OAAA,CAACZ,mBAAmB;IAAC0H,MAAM,EAAE3G,WAAY;IAAA4E,QAAA,gBACvC/E,OAAA,CAACsB,QAAQ;MAAA0D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACZnF,OAAA,CAACV,OAAO;MACNyH,QAAQ,EAAC,cAAc;MACvBC,YAAY,EAAE;QACZlC,SAAS,EAAE;MACb;IAAE;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACiB,CAAC;AAE1B;AAAC8B,GAAA,GAZuBJ,GAAG;AAAA,IAAAD,EAAA,EAAAK,GAAA;AAAAC,YAAA,CAAAN,EAAA;AAAAM,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}